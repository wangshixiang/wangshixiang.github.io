
[TOC]

## 摘要

## Abstract

## 第一章 绪论

二十一世纪以来，一股信息技术驱动的互联网化旋风几乎席卷了各行各业。人们的衣食住行，工作生活的方方面面都因此而发生了改变。新闻资讯的传播正是其中典型的案例，人们不再需要上街买前一日采写的报纸，不再需要等每月寄送的月刊。互联网可以让我们实时掌握全球的最新动态。基于此，本文将对一个新闻资讯APP的设计开发全过程，展开研究。

### 1.1 手机app的研究背景

APP（本文中出现的app也是它）是英文单词application（应用程序）的缩写，一般代指手机或其他移动设备客户端应用。客户端应用以其流畅度高、与智能手机操作系统契合度好、节省数据传输流量、用户黏性高等特性，在互联网应用中占据举足轻重的地位。如今，app已经渗透到了多种行业，给人们的生活提供了诸多便利。

#### 1.1.1 互联网发展现状

互联网（Internet）起源于1969年美国的ARPA网，它将全球全球的计算机网路连接在一起。互联网和巨大数量的计算机一起构筑了一条信息的高速公路。互联网已经渗透到了我们生活的各个方面。

自1994年中国接入互联网以来，中国的网民高速增长。根据中国互联网络信息中心（CNNIC）于2017年1月22日发布的第39次《中国互联网络发展状况统计报告》（下文简称《统计报告》），中国网民规模已达7.31亿，这个数字已经与欧洲的总人口相当。

#### 1.1.2 移动互联网的发展

同样是来源于CNNIC的这次《统计报告》的数据，移动网民已达6.95亿，移动互联网络在全体网民中的覆盖率已经达到95.1%。随着智能手机的普及和4g网络的覆盖，移动设备及移动互联网以其便携性，丰富的使用场景得到了中国网民的垂青。

#### 1.1.3 手机app的发展

手机app是安装在手机上的应用程序，是对手机功能的拓展。通常app相对于web页面会有更高的系统权限，能够实现更多的功能。例如消息推送，获取手机识别码，文件读写等。因为其安装在手机本地，所需要从服务器上获取的资源少，所以在打开速度，性能上，也具有优势。

### 1.2 新闻app行业现状

新闻客户端在2010年左右陆续兴起，各大新闻门户网站纷纷推出新闻客户端。新闻客户端的载体为手机，其便携性，和通讯终端的携带必要性，成为新闻客户端增加使用场景的有利条件。

新闻客户端还具有新闻发布速度快，可定制程度高，可互动性好等特点。同时也具有新闻质量不一，新闻碎片化等缺点。

### 1.3 本文主要内容

#### 1.3.1 主要内容

本文将对新闻app开发的全过程进行研究。

包括新闻app的相关背景，相关技术的研究学习和可行性的研究，对新闻app用户的需求进行分析，新闻app的设计包括功能的设计、界面样式的设计，系统的实现、测试，还有对本次研究过程遇到的问题的经验教训的总结。

#### 1.3.2 论文结构

全文总共分为6章。第一章是绪论，主要介绍新闻app的研究背景，发展历程，优缺点和存在的问题。第二章介绍了本次app开发使用到的技术，并且对这种解决方案的可行性进行研究。第三章是需求分析，对用户到底需要一个怎样的新闻客户端进行细化的研究。第四章是系统设计，包括功能和外观样式的设计。第五章是系统实现，介绍了每一步的具体实现方法。第六章是系统测试，测试我们实现的这套客户端系统的每一项功能，并对其中出现的bug进行修复。还包括有总结回顾，致谢，和参考文献等内容。

## 第二章 相关技术及可行性分析

### 2.1 开发模式

#### 2.1.1 三种典型的开发模式

native app 原生应用开发模式，使用智能手机操作系统提供商提供的开发工具，和指定的程序语言进行手机应用开发的模式。例如安卓手机应用使用谷歌提供的android studio，用java语言编写代码构建应用。ios应用使用苹果提供的开发工具，用objective c或swift编写代码构建应用等。

web app 是指使用常规web页面开发方式，将web页面代码放置于http服务器,使用浏览器访问浏览器进行获取和使用web应用的开发方式。web app 有着快速无痛迭代，部署简单，无需安装，跨平台等特点。但同时受制于浏览器的功能局限，也有着无法使用系统更底层的功能 ，当应用较大，或者网络速度不佳时卡顿的缺点。

hybride app 使用与web app相似的方式组织代码，但是将其部分代码打包在安装包中部署到手机客户端本地，因此加载速度会有大的提升，同时js应用有着丰富的开源项目代码，这将极大的提升应用的开发速度。随着近一段时期以来的react native组件式开发的热潮，混合开发的热度进一步提高。

#### 2.1.2 本文选用的开发模式

本文中采用了混合开发的开发开发模式。混合开发将部分资源缓存于手机本地，有着超越webapp的系统权限，可以使用丰富的开源内容。混合开发是一种成熟高效的开发模式。

本文将采用混合开发模式。

### 2.2 html5

html（ HyperText Markup Language ）是超文本标记语言，HTML5是W3C推出的又一个新标准。 HTML 5有两大特点：一是强化了 Web 网页的表现性能。其次是追加了本地数据存储等提升 Web 应用开发能力的功能。

#### 2.2.1 html简介与html+css+js的前端开发模式

html记载了页面的布局信息、标题、html版本，引用的script、样式和样式表信息、表单信息等。浏览器将根据这些信息进行渲染，最终展现给用户我们想要呈现的页面。

css层叠式样式表 记载了页面的样式信息，我们能看到绚丽多彩的页面，很大程度上是样式表的功劳，样式表是浏览器渲染页面效果的重要依据。

js则记载了页面的逻辑处理信息，是页面的控制中枢。html+css+js来做前端页面是前端页面开发的最佳实践，也几乎是唯一选择。

#### 2.2.2 html5 利于app开发的新特性

1. localStorage

   localStorage本地存储将对每一个站点提供一定空间的存储空间，根据浏览器的具体实现可能会有不同，通常是5m。运行于浏览器上javascript脚本可以将数据存储在此处，localStorage 保存的数据即使关闭浏览器也不会被删除。需要缓存的数据，或者其他需要永久保存的数据可以保存在此处。但localstorage中的数据不会被自动清理，要注意垃圾回收的问题。

2. sessionStorage

   sessionStorage会话存储与localstorage的功能相似，但是当浏览器关闭时这些数据将不再保存。sessionStorage可以存储诸如登陆信息等需要在关闭浏览器是清理的数据。

3. 其他

   除此之外，html5还新增了如 require指令来限定表单项必填，增加input的类型等改进。还有canvas绘图等特性。

#### 2.2.3 html5 用于app开发的可行性

受益于html5所提供的本地化存储，配合javascript来处理相关逻辑，css来处理页面样式。完全可以展现出一个新闻app页面的所有功能。

### 2.3 javascript

#### 2.3.1 javascript 简介

javascript是运行于浏览器上的一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，他现在已成为WEB应用开发中不可或缺的一部分。javascript 是一种解释性语言，即代码不需要进行预编译，他是通过嵌入到html中来为网页添加各种各样的动态功能，让页面有更流畅和美观的浏览效果。除此之外，javascript 还拥有强大的跨平台性，例如他可以在Windows, Linux,Mac,iOS,Android 等各种平台下完美运行 。

#### 2.3.2 ecmascript 6 新特性

javascript 由ecmascript、浏览器模型、文档模型等部门组成。ecmascript是javascript的核心。es6（ecmascript6）是ecmascript的一个版本。es6新增了class、promise、字符串模板等功能。

其中promise对解决“死亡回调”的问题，优化回调函数的写法提供了非常便利的条件。在app开发当中需要编写异步操作代码的时候，这将是一个非常有益的新特性。而字符串模板将使用javascript渲染html元素带来便利。class 中类的继承等写法也将js代码更容易编写、理解和阅读。同时还有模块加载等新特性。

es6是js的重大版本更新，将为webapp的开发提供巨大便利。移动端开发中，手机浏览器和webview都对es6有相当部分的支持，这将为app的开发提供巨大的便利体条件。

### 2.4 jQuery 库

jQuery是一个非常热门的javascript库，在主流web应用中有着广泛的应用。jQuery提供便利地dom操作方法，同时封装了诸如ajax调用，deffered promise写法等其他简单易用的功能。

#### 2.4.1 jquery dom操作

为dom（文档模型）的各个种类的操作提供简单医用的api是jquery的一大特色。依据这一特性，我们可以方便的为页面展现出个中绚丽的效果和强大的功能。例如我们可以是用使用jquery选择器可以方便的获取html元素。使用\$.html()方法可以方便的修改html元素的内容。使用\$.bind()可以为html元素添加事件监听。\$.append()/\$.prepend可以方便的为html元素添加子节点。使用\$.hide/\$.show可以方便的隐藏/显示html节点。\$.fadeIn()/\$.fadeOut()可以方便的添加动画效果，等等。

#### 2.4.2 jquery 其他

除了dom操作意外，jQuery还提供了方便的其他api。

例如$.ajax 提供了既功能强大又简单易用的ajaxapi，消息内容在下一节中展开。除此之外，还有jquery提供的promise工具\$.deferred等其他功能。

### 2.5 AJAX

ajax 是异步javascript和xml的简称，得益于其提供的优异的交互体验，现已成为web开发的主流方式。

#### 2.5.1 ajax 简介

传统网页，如果需要更新网页信息，需要从服务器同步全量数据，包括整个页面的所有内容，如样式表，js脚本，和html等等。这就造成了资源的浪费和同时也影响了页面性能。

而是用异步传输技术，我们就可以方便的进行异步数据传输，从而在需要更新数据的时候只更新需要更新的内容。节省了贷款，提升性能。因为不需要整页刷新，所以用户体验也得到了很大的提升。

#### 2.5.2 jsonp

jsonp 是为了解决跨域问题而提出的解决方案。在不进行设置的情况下，默认浏览器是不允许跨域获取数据的。而引用js则没用限制。得益于这个特性，天才程序员们想到了用引用js 的方式来加载跨域数据。浏览器将回掉函数的函数名发送给服务器，服务器将调用回掉函数的js指令以js文件的方式，返回给浏览器。浏览器解析js文件，从而触发回掉函数，得到数据。

#### 2.5.3 jquery ajax

jquery库为ajax调用封装了功能强大的api库。如\$.get()提供了使用get方法调用http接口的api。\$.post()提供了使用post方法调用http接口的api。同时还可以使用$.ajax()方法调用所有http方法的接口，并且支持对各种配置项进行配置。

### 2.6 开发工具

#### 2.6.1 百度脑图

百度脑图（kityminder）是百度前段团队出品的一个在线思维导图软件，已在github上开源。本文中使用此项工具对项目设计的各个方面进行分析与记录。

#### 2.6.2 webstorm

webstorm是jetbrains出品的前端开发解决方案。webstorm提供了内置服务器，方便好用的version control system，代码提示，丰富的插件库等。

#### 2.6.3 hbuilder

hbuilder是由dcloud公司开发的ide工具。hbuilder提供了移动端开发的整套方案，内置了mui、h5+等移动端框架，并且提供一键打包成最终发布的程序文件的功能。本文使用了他的打包功能生成用于测试和发布的apk文件。

此外，本文还使用了hbuilder提供的联机调试工具进行手机展示效果的实时调试。

#### 2.6.4 postman

postman是一个restful api测式工具。他提供了浏览器插件、windows、osx、linux等多个系统版本的客户端工具。本文中，使用它作为借口测式的工具。

## 第三章 新闻资讯app需求分析

### 3.1 分类浏览的需求

根据每一个用户兴趣点的不同，或特定的信息索取需求。我们需要对劲新闻进行分类。

例如，我们可以对用户关注比较多的热点新闻，设置最热分类。针对关注民生新闻的用户，设置民生分类。针对关注明星八卦娱乐信息的用户群体设置一个娱乐新闻分类。根据关注经济社会发展和财富咨询的群体，设置财经分类。针对体育迷，关注体育明星，运动赛事的用户群体设置体育新闻分类。针对学生教师家长，和其他关注教育发展的人群设置教育新闻分类。面向关注情感八卦，奇闻趣事的群体设置社会新闻栏目。

### 3.2 个性化定制的需求

看起来相同的移动端应用程序，可以根据用户的自定义设置，来获取自己需要的信息，让客户端应用，更加贴近新闻与读者的使用需求。

例如，让手机资讯客户端用户都可以按照用户的使用需求来自定义阅读的样式和字体的大小。使用无线局域网的时候可以对即将阅读的新闻资讯进行缓存，来达到提高阅读体验，反应速度，和节省流量的目的。依据用户选择的区域位置或者来自卫星定位的数据来针对性地向用户推荐他们身边的新闻资讯。还可让用户订阅自己感兴趣的专栏，系列，对自己喜欢的新闻进行收藏。根据用户的收藏的新闻进行新闻类别和新闻标签的统计，根据这些统计信息，向用户推荐相关的新闻资讯。

### 3.3 阅览相关内容的需求

当用户了解到一条新闻资讯消息的时候，有时候这一条消息并不能展示出新闻的全貌，于此同时，用户也极有可能对类似的新闻资讯感兴趣。这时候，在新闻资讯的展示页面中，就非常有必要防止与本条新闻资讯相关的消息链接。

### 3.4 参与者与用例

### 3.5 一般流程

##  

## 第四章 新闻资讯app系统设计

### 4.1 功能设计

#### 4.1.1 功能分析

受益于互联网的开放环境，我们可以方便的找到新闻信息资源。这将对本次app的开发提供巨大便利。我们不需要再维护收集和编辑新闻资源。而是将经历放在客户端功能开发上面。

新闻导航功能。按照前述的新闻分类，我们将在客户端的导航模块中放置最热、教育、体育、财经、社会、娱乐等导航按钮。导航模块的设置，将极大地方便用户获取相关领域新闻资讯的便利性。

热门新闻专题。针对热点新闻和用户关注两比较大的新闻消息。我们设置热门新闻专题。向用户展示当前的新闻热点。

教育新闻专题。教育新闻是学生家长与学校老师之间的沟通纽带，也是发布教育科研成果以及发布教育政策法规的平台与阵地。针对于广大用户对教育的重视与关注，我们设置了教育新闻专题，向用户展示一手的教育新闻资讯。

娱乐新闻专题。娱乐新闻是根据现代人的某种需要而生产出来供大部分人消费的信息产品。针对于广大用户的需求，我们设置了娱乐新闻专题，向用户展示一手的娱乐新闻资讯。

此外，我们还有社会，体育，民生，财经等新闻专题向用户展示。

相关新闻功能。在新闻详情的展示页面，将向用户提供与本条新闻资讯相关的新闻标题和新闻链接。方便用户更加深入了解本条新闻的相关的内容。

#### 4.1.2 功能图谱

### 4.2 界面设计

#### 4.2.1 设计原则

本次毕业设计中的界面主要遵循了下面几项设计原则。

清晰易懂。为保证系统的易用性和为用户获取信息提供便利，必须保证界面清晰易懂。不为阅读者增添阅读意外的麻烦。

直接操作。减少用户的操作步骤和可能存在的疑点。

外观追随功能。外观是为展现功能而存在的，应愤青主次关系。防止过度设计外观而忘记了初衷。

#### 4.2.2 界面内容简介

整个项目顶端为专题导航，导航中有导航按钮，按钮指向了各个新闻状体也，专题页的地步有翻页加载功能。

新闻详情页中除了顶部导航意外还未用户提供了新闻标题、来源、时间、新闻内容详情，新闻图片等内容。初次之外，详情页中还设计了想管新闻功能，为用户推荐用户可能感兴趣的内容。

#### 4.2.3 demo

界面的高保真设计图如下：

##  



## 第五章 新闻资讯app系统实现

### 5.1 主页

主页放置了各类新闻的热门聚合，涉及的功能包括jquery ajax获取新闻源服务器数据，数据和样式的渲染，代码示例以及最终实现效果如下：

- 代码

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=1080,target-densitydpi=340,user-scalable=no" />
<meta name="full-screen" content="yes">
<title></title>
<link rel="stylesheet" href="css/ws_style.css">
<link rel="stylesheet" href="css/swiper.css">
<script src="js/jquery-1.8.3.js"></script>
<script src="js/swiper.js"></script>
</head>
<style>
	.notice{height: 100px;line-height: 100px;color:red;font-size:40px;display: none;}
	.notice a{color:#666;font-size:40px;}
	.notice a:hover{color:#ff4951;}
</style>
<body>
	<iframe src="public_title.html" frameborder="0"></iframe>
	
	<div class="swiper-container banner">
		<div class="swiper-wrapper"></div>
		<div class="swiper-pagination"></div>
	</div>

	<div class="notice">
		<marquee behavior="scroll" direction="left" scrollamount="20"></marquee>
	</div>
	<div class="index_main"></div>
	<div class="loading"><img src="images/loading.gif" alt=""></div>
	<div class="ajax_btn">点击加载更多</div>

<script>
	
	
	var page = 1;
	$('.loading').show();
	$('.ajax_btn').hide();
	$.ajax({
		url:'http://www.tngou.net/api/top/list',
		type:'get',
		data:{'page':'1','rows':'30'},
		dataType:'jsonp',	
		success:function(data){
			banner(data);
		}
	});

	$('.ajax_btn').click(ajax_data);
	function ajax_data(){
		$('.loading').show();
		$('.ajax_btn').hide();
		page++;
		$.ajax({
			url:'http://www.tngou.net/api/top/list',
			type:'get',
			data:{'page':page,'rows':'30'},
			dataType:'jsonp',	
			success:function(data){
				text(data);
			}
		});
	}

	function time_long(time){
		var new_time = new Date();
		var long_time = new Date(time);
	    var r = 0; 
	    
	    if (new_time.getDate() > long_time.getDate()) { 
	    	r = (new_time.getDate() - long_time.getDate()); 
	    	return r + "天前"; 
	    }
	    if (new_time.getHours() > long_time.getHours()) { 
	    	r = (new_time.getHours() - long_time.getHours()); 
	    	return r + "个小时前"; 
	    }
	    if (new_time.getMinutes() > long_time.getMinutes()) { 
	    	r = (new_time.getMinutes() - long_time.getMinutes()); 
		    return r + "分钟前"; 
	    } 
	    	return "刚刚"; 
	};

	function banner(e){
		for(var i=0;i<6;i++){
			if(e.tngou[i].img!='/top/default.jpg'){
				$('.banner .swiper-wrapper').append('<div class="swiper-slide"><a href="news_show.html#'+ e.tngou[i].id +'"><img src="http://tnfs.tngou.net/image/'+ e.tngou[i].img +'" alt=""></a><div class="banner_text">'+ e.tngou[i].keywords +'</div></div>');
			}
		}

		$.ajax({
			url:'data.json',
			type:'get',
			dataType:'json',
			success:function(data){
				$('.notice marquee').html('<a href="gg_main.html">'+ data.title+'&nbsp;&nbsp;&nbsp;&nbsp;'+data.date +'</a>');
				if(data.open=='true' && data.title!='' && new Date().getTime()>new Date(data.start).getTime() && new Date().getTime()<new Date(data.end).getTime()){
					$('.notice').show();
				}
			}
		});
		
		var swiper = new Swiper('.swiper-container', {
		    pagination: '.swiper-pagination',
		    paginationClickable: true,
		});
		text(e);
	};

	function text(t){
		for(var i=6;i<30;i++){
			if(t.tngou[i].img!='/top/default.jpg'){
				var time = t.tngou[i].time;
				var row_html = '<div class="index_row"><div class="container"><a href="news_show.html#'+ t.tngou[i].id +'"><div class="left"><img src="http://tnfs.tngou.net/image/'+ t.tngou[i].img +'" alt=""></div><div class="right"><h2>'+ t.tngou[i].title +'</h2><div class="time"><div class="time_left">'+ t.tngou[i].fromname +'</div><div class="time_right">'+ time_long(time) +'</div></div></div><div class="clearfix"></div></a></div></div>'
				$('.index_main').append(row_html);
			}
		}
		$('.loading').hide();
		$('.ajax_btn').show();
	};
	

</script>
</body>
</html>

```

- 效果

  ​

### 5.2 新闻详情页

新闻详情页是用户阅读新闻停留时间最长的页面。本页面将提供新闻标题，新闻图片，新闻内容，新闻发布时间等功能，使用ajax获取远程数据库的数据。并提供展示。示例代码及效果图如下：

代码：

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=1080,target-densitydpi=340,user-scalable=no" />
<title>随阅新闻网</title>
<link rel="stylesheet" href="css/ws_style.css">
<script src="js/jquery-1.8.3.js"></script>
</head>
<body>
	<div class="title">
		<a href="javascript:history.back(-1)"><img src="images/left.png" alt=""></a>
		详情
	</div>
	<h1 class="title_h1"></h1>
	<div class="news_time">
		<span class="left"></span>
		<span class="right"></span>
	</div>
	<div class="container">
		<div class="news_text"></div>
		<div class="text_ul">
			<h2>相关阅读:</h2>
			<ul class="container"></ul>
		</div>
	</div>
<script>
	



	var pro_id = window.location.hash.substring(1);
	$.ajax({
		url:'http://www.tngou.net/api/top/show',
		data:{'id':pro_id},
		type:'get',
		dataType:'jsonp',	
		success:function(data){
			news_text(data);
		}
	});

	function news_text(e){
		$('.title_h1').text(e.title)
		$('.news_text').html(e.message);
		var time = new Date(e.time);
		$('span.left').html(time.getFullYear()+'-'+(time.getMonth()+1)+'-'+time.getDate()+' 发布');
		$('span.right').html(e.count+'浏览');
		if($('.news_text img').length<1){
			$('.news_text').prepend('<img src="http://tnfs.tngou.net/image/'+ e.img +'" alt="">');
		}

		$.ajax({
			url:'http://www.tngou.net/api/top/list',
			type:'get',
			data:{'id':'6','rows':'6','page':parseInt(Math.random()*(20-1)+1)},
			dataType:'jsonp',	
			success:function(data){
				xg(data);
			}
		});

		function xg(t){
			for(var i=0;i<6;i++){
				if(t.tngou[i].img!='/top/default.jpg'){
					$('ul.container').append('<li><a href="xiangguan.html#'+ t.tngou[i].id +'">'+ t.tngou[i].title +'</a></li>');
				}
			}
		}
	};
</script>
</body>
</html>

```



### 5.3 相关新闻功能

为方便用户获取相关新闻，设置了相关新闻功能，示例代码及最终效果图如下：

示例代码：

```html
function xg(t){
			for(var i=0;i<6;i++){
				if(t.tngou[i].img!='/top/default.jpg'){
					$('ul.container').append('<li><a href="xiangguan.html#'+ t.tngou[i].id +'">'+ t.tngou[i].title +'</a></li>');
				}
			}
		}
```



### 5.4 民生新闻专题

民生新闻专题主要提供了民生新闻的列表展示页面，示例代码及实际效果如下：

代码：

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=1080,target-densitydpi=340,user-scalable=no" />
<meta name="full-screen" content="yes">
<title></title>
<link rel="stylesheet" href="css/ws_style.css">
<link rel="stylesheet" href="css/swiper.css">
<script src="js/jquery-1.8.3.js"></script>
<script src="js/swiper.js"></script>
</head>
<body>
	<iframe src="public_title.html" frameborder="0"></iframe>
	
	<div class="index_main"></div>
	<div class="loading"><img src="images/loading.gif" alt=""></div>
	<div class="ajax_btn">点击加载更多</div>

<script>
	
	var id = window.location.hash.substring(1);
	var page = 1;
	$('.loading').show();
	$('.ajax_btn').hide();
	$.ajax({
		url:'http://www.tngou.net/api/top/list',
		type:'get',
		data:{'page':'1','rows':'20','id':id},
		dataType:'jsonp',	
		success:function(data){
			text(data);
		}
	});

	$('.ajax_btn').click(ajax_data);
	function ajax_data(){
		$('.loading').show();
		$('.ajax_btn').hide();
		page++;
		$.ajax({
			url:'http://www.tngou.net/api/top/list',
			type:'get',
			data:{'page':page,'rows':'20','id':id},
			dataType:'jsonp',	
			success:function(data){
				text(data);
			}
		});
	}

	function time_long(time){
		var new_time = new Date();
		var long_time = new Date(time);
	    var r = 0; 
	    
	    if (new_time.getDate() > long_time.getDate()) { 
	    	r = (new_time.getDate() - long_time.getDate()); 
	    	return r + "天前"; 
	    }
	    if (new_time.getHours() > long_time.getHours()) { 
	    	r = (new_time.getHours() - long_time.getHours()); 
	    	return r + "个小时前"; 
	    }
	    if (new_time.getMinutes() > long_time.getMinutes()) { 
	    	r = (new_time.getMinutes() - long_time.getMinutes()); 
		    return r + "分钟前"; 
	    } 
	    	return "刚刚"; 
	};

	function text(t){
		for(var i=0;i<20;i++){
			if(t.tngou[i].img!='/top/default.jpg'){
				var time = t.tngou[i].time;
				var row_html = '<div class="index_row"><div class="container"><a href="news_show.html#'+ t.tngou[i].id +'"><div class="left"><img src="http://tnfs.tngou.net/image/'+ t.tngou[i].img +'" alt=""></div><div class="right"><h2>'+ t.tngou[i].title +'</h2><div class="time"><div class="time_left">'+ t.tngou[i].fromname +'</div><div class="time_right">'+ time_long(time) +'</div></div></div><div class="clearfix"></div></a></div></div>'
				$('.index_main').append(row_html);
			}
		}
		$('.loading').hide();
		$('.ajax_btn').show();
	};
	

</script>
</body>
</html>

```



### 5.5 体育新闻专题

体育新闻专题页提供了体育新闻列表的展示功能，代码及效果图如下：

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=1080,target-densitydpi=340,user-scalable=no" />
<meta name="full-screen" content="yes">
<title></title>
<link rel="stylesheet" href="css/ws_style.css">
<link rel="stylesheet" href="css/swiper.css">
<script src="js/jquery-1.8.3.js"></script>
<script src="js/swiper.js"></script>
</head>
<body>
	<iframe src="public_title.html" frameborder="0"></iframe>
	
	<div class="index_main"></div>
	<div class="loading"><img src="images/loading.gif" alt=""></div>
	<div class="ajax_btn">点击加载更多</div>

<script>
	
	var id = window.location.hash.substring(1);
	var page = 1;
	$('.loading').show();
	$('.ajax_btn').hide();
	$.ajax({
		url:'http://www.tngou.net/api/top/list',
		type:'get',
		data:{'page':'1','rows':'20','id':id},
		dataType:'jsonp',	
		success:function(data){
			text(data);
		}
	});

	$('.ajax_btn').click(ajax_data);
	function ajax_data(){
		$('.loading').show();
		$('.ajax_btn').hide();
		page++;
		$.ajax({
			url:'http://www.tngou.net/api/top/list',
			type:'get',
			data:{'page':page,'rows':'20','id':id},
			dataType:'jsonp',	
			success:function(data){
				text(data);
			}
		});
	}

	function time_long(time){
		var new_time = new Date();
		var long_time = new Date(time);
	    var r = 0; 
	    
	    if (new_time.getDate() > long_time.getDate()) { 
	    	r = (new_time.getDate() - long_time.getDate()); 
	    	return r + "天前"; 
	    }
	    if (new_time.getHours() > long_time.getHours()) { 
	    	r = (new_time.getHours() - long_time.getHours()); 
	    	return r + "个小时前"; 
	    }
	    if (new_time.getMinutes() > long_time.getMinutes()) { 
	    	r = (new_time.getMinutes() - long_time.getMinutes()); 
		    return r + "分钟前"; 
	    } 
	    	return "刚刚"; 
	};

	function text(t){
		for(var i=0;i<20;i++){
			if(t.tngou[i].img!='/top/default.jpg'){
				var time = t.tngou[i].time;
				var row_html = '<div class="index_row"><div class="container"><a href="news_show.html#'+ t.tngou[i].id +'"><div class="left"><img src="http://tnfs.tngou.net/image/'+ t.tngou[i].img +'" alt=""></div><div class="right"><h2>'+ t.tngou[i].title +'</h2><div class="time"><div class="time_left">'+ t.tngou[i].fromname +'</div><div class="time_right">'+ time_long(time) +'</div></div></div><div class="clearfix"></div></a></div></div>'
				$('.index_main').append(row_html);
			}
		}
		$('.loading').hide();
		$('.ajax_btn').show();
	};
	

</script>
</body>
</html>

```

5.6 其他新闻专题

其他新闻专题使用了相似的技术，部分代码示例如下：

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=1080,target-densitydpi=340,user-scalable=no" />
<meta name="full-screen" content="yes">
<title></title>
<link rel="stylesheet" href="css/ws_style.css">
<link rel="stylesheet" href="css/swiper.css">
<script src="js/jquery-1.8.3.js"></script>
<script src="js/swiper.js"></script>
</head>
<body>
	<iframe src="public_title.html" frameborder="0"></iframe>
	
	<div class="index_main"></div>
	<div class="loading"><img src="images/loading.gif" alt=""></div>
	<div class="ajax_btn">点击加载更多</div>

<script>
	
	var id = window.location.hash.substring(1);
	var page = 1;
	$('.loading').show();
	$('.ajax_btn').hide();
	$.ajax({
		url:'http://www.tngou.net/api/top/list',
		type:'get',
		data:{'page':'1','rows':'20','id':id},
		dataType:'jsonp',	
		success:function(data){
			text(data);
		}
	});

	$('.ajax_btn').click(ajax_data);
	function ajax_data(){
		$('.loading').show();
		$('.ajax_btn').hide();
		page++;
		$.ajax({
			url:'http://www.tngou.net/api/top/list',
			type:'get',
			data:{'page':page,'rows':'20','id':id},
			dataType:'jsonp',	
			success:function(data){
				text(data);
			}
		});
	}

	function time_long(time){
		var new_time = new Date();
		var long_time = new Date(time);
	    var r = 0; 
	    
	    if (new_time.getDate() > long_time.getDate()) { 
	    	r = (new_time.getDate() - long_time.getDate()); 
	    	return r + "天前"; 
	    }
	    if (new_time.getHours() > long_time.getHours()) { 
	    	r = (new_time.getHours() - long_time.getHours()); 
	    	return r + "个小时前"; 
	    }
	    if (new_time.getMinutes() > long_time.getMinutes()) { 
	    	r = (new_time.getMinutes() - long_time.getMinutes()); 
		    return r + "分钟前"; 
	    } 
	    	return "刚刚"; 
	};

	function text(t){
		for(var i=0;i<20;i++){
			if(t.tngou[i].img!='/top/default.jpg'){
				var time = t.tngou[i].time;
				var row_html = '<div class="index_row"><div class="container"><a href="news_show.html#'+ t.tngou[i].id +'"><div class="left"><img src="http://tnfs.tngou.net/image/'+ t.tngou[i].img +'" alt=""></div><div class="right"><h2>'+ t.tngou[i].title +'</h2><div class="time"><div class="time_left">'+ t.tngou[i].fromname +'</div><div class="time_right">'+ time_long(time) +'</div></div></div><div class="clearfix"></div></a></div></div>'
				$('.index_main').append(row_html);
			}
		}
		$('.loading').hide();
		$('.ajax_btn').show();
	};
	

</script>
</body>
</html>

```



##  

## 第六章 新闻资讯app系统测式

### 6.1 主页功能测试

针对主页提供的新闻几项功能，最终测试结果如下：

| 功能       | 应达到效果         | 实际达到想过        | 是否成功 |
| -------- | ------------- | ------------- | ---- |
| 导航展示     | 外观正常，链接可用     | 外观正常，链接可用     | 成功   |
| 新闻列表数据获取 | 正常获取数据        | 正常后去数据        | 成功   |
| 新闻展示     | 标题图片显示正常，链接可用 | 标题图片显示正常，链接可用 | 成功   |
| 轮播图展示    | 图片正常轮播，链接好用   | 图片正常轮播，链接好用   | 成功   |



### 6.2 新闻详情页功能测试

针对新闻详情页面涉及的功能，最终测试结果乳腺：

| 功能     | 应达到效果     | 实际达到效果    | 是否成功 |
| ------ | --------- | --------- | ---- |
| 标题展示   | 展示正常，位置正确 | 展示正常，位置正确 | 成功   |
| 数据获取   | 正常获取数据    | 正常获取数据    | 成功   |
| 新闻发布时间 | 正常获取，正常展示 | 正常获取，正常展示 | 成功   |

### 6.3 相关新闻功能测试

针对相关新闻功能的各项子功能，测试结果如下：

| 功能   | 应达到效果      | 实际达到效果     | 是否成功 |
| ---- | ---------- | ---------- | ---- |
| 数据获取 | 成功获取到服务器数据 | 成功获取到服务器数据 | 成功   |
| 列表渲染 | 正确显示新闻列表   | 正确显示新闻列表   | 成功   |
| 外观样式 | 位置及字体到校正常  | 位置及字体大小正常  | 成功   |

### 6.4 新闻专题页面测试

针对新闻专题页面设计的功能，做了如下测式：

| 功能    | 应达到效果       | 实际达到效果      | 是否成功 |
| ----- | ----------- | ----------- | ---- |
| 导航渲染  | 正确渲染导航栏     | 正确渲染导航栏     | 成功   |
| 数据获取  | 正确获取指定类型数据  | 正确获取指定类型数据  | 成功   |
| 列表页渲染 | 正确渲染新闻标题和链接 | 正确渲染新闻标题和链接 | 成功   |
| 轮播图   | 轮播图正常使用     | 轮播图正常使用     | 成功   |

### 6.5 测试中遇到及解决的问题

#### 6.5.1 数据获取

因新闻源服务器使用jsonp的异步数据获取方式，因为正确制定jquery ajax的类型参数而无法获取数据。查实原因改正后，成功获取数据。

#### 6.5.2 移动端实际效果与浏览器模拟的移动端效果差异

在浏览器开发环境开发完成后，央视正常。而将其打包到apk文件安装到手机重视时出现了结构混乱，字体大小错乱的问题。最终，借助于hbuilder提供的联机调试工具，成功解决了样式的问题，成功解决。

###  



## 总结

### 经验教训

### 展望

## 参考文献

[1]	CNNIC.第39次《中国互联网络发展状况统计报告》.CNNIC,2017-1-22.

## 致谢

